{% extends "base.html" %}{% load static %}
{% block title%} CP {% endblock %}

{% block stylesheet %}
    <link rel="icon" href="/media/fav.png" />
    <link rel="stylesheet" href="/static/css/styles.css"> 
{% endblock %}

{% block main %}
      
    <div class="countdown" data-countdown="2020/06/18 22:43:00"></div>

    <form method="POST" id="prob-form">{% csrf_token %}
        <p>Min Rating : <input type="number" name="min" id="min"></p>
        <p>Max Rating : <input type="number" name="max" id="max"></p>
        <p>User Name : <input type="text" name="username" id="username"></p>
        <p>Tag : <input type="text" name="tag" placeholder=" &quot ; &quot Seperated" id="tag"></p>
        <button type="button" id = "sub_id" class="save btn btn-default">Get Questions</button>
    </form>

    <div class="loading"></div>
      

    <div class="prob" id="p">
    </div>

{% endblock %}
    
{% block javascript %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript">
       $('#sub_id').click(function(e){
           $('.loading').show();
           $.ajax({
               type:'POST',
               url:"/cp/",
               data:{
                   min:$('#min').val(),
                   max:$('#max').val(),
                   username:$('#username').val(),
                   tag:$('#tag').val(),
                   choose:"prob"
                },
               success:function(data){
                   console.log(data['prob']);
                   $('.loading').hide();
                   $('#p').append("<p>" + data['prob'][0] + "</p>");
                   $('#p').append("<p>" + data['prob'][1] + "</p>");
                   document.getElementById("prob-form").reset();
                   
               },
           });
       });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="{% static 'js/jquery.countdown.js' %}"></script>
    <script src="{% static 'js/jquery.countdown.min.js' %}"></script>
    <script>
        //console.log($('#countdown').data('time-upto'));
        $('[data-countdown]').each(function() {
            var $this = $(this), finalDate = $(this).data('countdown');
            $this.countdown(finalDate, function(event) {
              $this.html(event.strftime('%D days %H:%M:%S'));
            });
          });          
    </script>
{% endblock %}